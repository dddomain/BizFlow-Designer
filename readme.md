# **BizFlow Designer**

## **1\. 概要**

**BizFlow Designer** は、ブラウザひとつで動作する、軽量かつ高機能なアクティビティ図（業務フロー図）作成ツールです。

専用ソフトのインストールやユーザー登録、インターネット接続は一切不要です。HTMLファイルをブラウザで開くだけで、直感的な操作で美しい図を作成できます。エンジニアや業務担当者が、思考を止めることなくプロセスを可視化できるよう設計されています。

## **2\. 主な特徴**

* 🚀 **完全オフライン動作**: 外部サーバーへの通信を行わないため、機密性の高い業務フローも安心して作成できます。  
* 🖱️ **直感的な操作**: ドラッグ＆ドロップでの配置、右クリックでのクイック追加など、迷わない操作性を実現。  
* 🎨 **高度な描画機能**:  
  * **ルート調整**: 接続線の経路を自由に調整できるハンドル機能。  
  * **拡張ポート**: 図形の各辺に3つの接続点を用意し、線が重なりにくい配線が可能。  
  * **アイコン図形**: PC、サーバー、書類などのアイコン素材を標準搭載。  
  * **カラーパレット**: ワンクリックで適用できるパステルカラーのプリセット。  
* 📄 **多彩な出力**: JSON保存に加え、PNG/JPEG画像、**SVG形式**、PDF形式での出力に対応。  
* 📱 **タッチ操作対応**: タブレットやタッチパネルPCでのピンチズーム、パン操作もサポートしています。

## **3\. 起動方法**

1. 配布された index.html（または bizflow\_designer\_v7.html）ファイルをデスクトップなど任意の場所に保存します。  
2. ファイルをダブルクリックします。  
3. Google Chrome, Microsoft Edge, Safari などのモダンブラウザでアプリが起動します。

## **4\. 基本的な使い方**

### **4.1 図形の配置**

画面左側の「パレット（ステンシル）」から、使いたい図形を中央のキャンバスへドラッグ＆ドロップします。

* **ノード**: 開始/終了、処理、判断、データストア、テキスト  
* **アイコン**: パソコン、書類、サーバー、ユーザー（装飾用・接続線なし）  
* **コンテナ**: 担当領域（スイムレーン）

### **4.2 図形の接続と調整**

1. **接続**: 図形の上にマウスカーソルを合わせると、各辺に3つ（計12箇所）の小さな「●（ポート）」が表示されます。ポートをクリックし、別の図形のポートまでドラッグすると線が引かれます。  
2. **ルート変更**: 選択した接続線（エッジ）上に表示される **青いハンドル（●）** をドラッグすることで、線の通るルート（経由点）を自由に変更できます。  
   * ハンドルをダブルクリックすると、その経由点を削除してリセットできます。

### **4.3 デザインと編集**

* **テキスト編集**: 図形や線をダブルクリックすると、ラベルテキストを編集できます。  
* **プロパティパネル**: 画面右側のパネルで詳細設定が可能です。  
  * **カラーパレット**: 「図形背景色」の下にあるパステルカラーの四角形をクリックすると、瞬時に色を変更できます。

## **5\. 便利な機能**

### **✨ クイック追加（右クリック）**

図形のポート（接続点）を **右クリック** すると、メニューが表示されます。 次に繋げたい図形（処理、判断など）を選択すると、自動的にラインで接続された状態で新しい図形が配置されます。

### **📚 レイヤーの並べ替え**

画面右上のタブを「レイヤー」に切り替えると、配置されている図形の一覧が表示されます。 リストの項目をドラッグ＆ドロップすることで、図形の重なり順（前面・背面）を変更できます。

### **🔍 ズームとスクロール**

* **拡大・縮小**: Ctrlキーを押しながらマウスホイールを回転、またはツールバーの「＋」「－」ボタン。タッチパッドならピンチ操作。  
* **スクロール**: マウスホイール（上下）、Shift+ホイール（左右）、または Spaceキーを押しながらキャンバスをドラッグ。

## **6\. 保存と出力**

ツールバー右側の **「保存 (Export) ▼」** ボタンをクリックし、形式を選択します。

1. **JSONファイルとして保存**: 編集可能なデータとして保存します。「JSONから読込」で再開できます。  
2. **PNG画像 (背景透過)**: 背景が透明な画像。資料への貼り付けに最適です。  
3. **JPEG画像 (背景あり)**: 背景色とグリッドを含んだ画像です。  
4. **SVG形式で保存 (New)**: 画質が劣化しないベクター形式の画像として保存します。Web掲載やIllustrator等での編集に適しています。  
5. **PDF印刷 / 保存**: ブラウザの印刷機能を使用してPDF化します。

## **7\. JSONデータの活用とAI連携**

BizFlow Designerでは、作業データをJSON形式でインポート/エクスポートできます。

### **7.1 JSONフォーマット仕様 (v7.0)**

AIに指示を出す際は、以下のJSON形式に従うように指定してください。

{  
  "nodes": \[  
    {  
      "id": "一意のID (例: node-1)",  
      "type": "図形タイプ (rect, circle, diamond, db, swimlane, text, icon-pc, icon-doc, icon-server, icon-user)",  
      "x": X座標 (数値),  
      "y": Y座標 (数値),  
      "w": 幅 (数値),  
      "h": 高さ (数値),  
      "label": "表示ラベル (改行は \\\\n)",  
      "bgColor": "背景色 (例: \#ffffff)"  
    }  
  \],  
  "edges": \[  
    {  
      "id": "一意のID (例: edge-1)",  
      "source": "接続元のノードID",  
      "sourcePort": "ポート位置 (top, bottom, left, right, top-L, top-R 等)",  
      "target": "接続先のノードID",  
      "targetPort": "ポート位置",  
      "label": "線のラベル (任意)",  
      "waypoints": \[  
        { "x": 経由点X, "y": 経由点Y },  
        { "x": 経由点X, "y": 経由点Y }  
      \]  
    }  
  \]  
}

### **7.2 AIへのプロンプト例**

プロンプト例:  
「社内のPCセットアップ業務のフロー図を作成したいです。  
管理者が『PC』を準備し、ユーザーに『書類』を渡す流れを描いてください。  
アイコン図形（icon-pc, icon-userなど）を活用し、以下のJSONフォーマットで出力してください。  
\[ここに上記のJSONフォーマット仕様を貼り付ける\]」

## **8\. ショートカットキー一覧**

| キー操作 | 動作 |
| :---- | :---- |
| Delete / Backspace | 選択中の要素を削除 |
| Ctrl \+ C | 選択した要素をコピー |
| Ctrl \+ V | 貼り付け |
| Ctrl \+ Z | 元に戻す (Undo) |
| Ctrl \+ Y | やり直し (Redo) |
| Ctrl \+ A | すべて選択 |
| Space \+ ドラッグ | キャンバスの移動（パン） |
| Wheel | 上下スクロール |
| Shift \+ Wheel | 左右スクロール |
| Ctrl \+ Wheel | ズームイン・アウト |

## **9\. 動作環境**

以下の最新版ブラウザでの動作を確認しています。

* Google Chrome (推奨)  
* Microsoft Edge  
* Mozilla Firefox  
* Safari

※ JavaScript (ES6+) が有効になっている必要があります。

**BizFlow Designer Team**
